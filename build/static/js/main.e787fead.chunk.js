(this["webpackJsonpfull-stack-open"]=this["webpackJsonpfull-stack-open"]||[]).push([[0],{20:function(e,t,n){},21:function(e,t,n){},40:function(e,t,n){},41:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n(2),u=n(14),o=n.n(u),r=(n(20),n(21),n(3)),s=n(4),i=n.n(s),l="/api/persons",d={getAllContact:function(){return i.a.get(l).then((function(e){return e.data}))},addContact:function(e){return i.a.post(l,e).then((function(e){return e.data}))},deleteContact:function(e){return i.a.delete("".concat(l,"/").concat(e)).then((function(e){return e.data}))},updateContact:function(e,t){return i.a.put("".concat(l,"/").concat(e),t).then((function(e){return e.data}))}},j=(n(40),function(){var e=Object(a.useState)([]),t=Object(r.a)(e,2),n=t[0],u=t[1],o=Object(a.useState)(""),s=Object(r.a)(o,2),i=s[0],l=s[1],j=Object(a.useState)(""),f=Object(r.a)(j,2),b=f[0],m=f[1],h=Object(a.useState)(null),O=Object(r.a)(h,2),p=O[0],x=O[1],g=Object(a.useState)(null),v=Object(r.a)(g,2),C=v[0],y=v[1],w=Object(a.useState)(null),N=Object(r.a)(w,2),k=N[0],S=N[1];Object(a.useEffect)((function(){d.getAllContact().then((function(e){u(e)}))}),[]);var T=function(e){var t=e.message;return t?Object(c.jsx)("div",{className:"error",children:Object(c.jsx)("p",{children:t})}):null},A=function(e){var t=e.message;return t?Object(c.jsx)("div",{className:"success",children:Object(c.jsx)("p",{children:t})}):null},E=function(e){var t=e.message;return t?Object(c.jsx)("div",{className:"invalid",children:Object(c.jsx)("p",{children:t})}):null};return Object(c.jsxs)("div",{className:"phonebook",children:[Object(c.jsx)("h1",{children:"Phonebook"}),Object(c.jsx)(T,{message:p}),Object(c.jsx)(A,{message:C}),Object(c.jsx)(E,{message:k}),Object(c.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t={name:i,number:b},c=n.filter((function(e){return e.name.toLowerCase()===t.name.toLowerCase()}));0===c.length?""===i&&""===b?(x("Contact's name or number can't be empty!"),setTimeout((function(){x(null)}),5e3)):i.length<6||b.length<6?(S("Name or Number can't be less than 6 characters long"),setTimeout((function(){S(null)}),5e3)):isNaN(b)?(S("Number can't contain string"),setTimeout((function(){S(null)}),5e3)):d.addContact(t).then((function(e){u(n.concat(e)),y('Contact "'.concat(t.name,'" added successfully')),setTimeout((function(){y(null)}),5e3)})):window.confirm("The contact with name ".concat(t.name," already exists do you want to replace it?"))&&(d.updateContact(c[0].id,t).then((function(e){u(n.map((function(n){return n.name!==t.name?n:e})))})),y("Contact ".concat(t.name," updated successfully")),setTimeout((function(){y(null)}),5e3)),l(""),m("")},children:[Object(c.jsxs)("p",{children:["Name ",Object(c.jsx)("input",{type:"text",autoFocus:!0,onChange:function(e){l(e.target.value)},value:i})]}),Object(c.jsxs)("p",{children:["Number ",Object(c.jsx)("input",{type:"text",onChange:function(e){m(e.target.value)},value:b})]}),Object(c.jsx)("button",{children:"add"})]}),Object(c.jsx)("ul",{children:n.map((function(e,t){return Object(c.jsx)("li",{children:Object(c.jsxs)("p",{children:[e.name," ",e.number,"\xa0\xa0",Object(c.jsx)("button",{onClick:function(){return function(e){var t=n.find((function(t){return t.id===e}));window.confirm("do you really want to delete ".concat(t.name))&&d.deleteContact(e).then((function(){u(n.filter((function(t){return t.id!==e}))),x("".concat(t.name," deleted successfully"))})).catch((function(){x("unable to delete, the user  is already deleted from the server")})),setTimeout((function(){x(null)}),5e3)}(e.id)},children:"delete"})]})},t)}))})]})}),f=function(){return Object(c.jsx)(c.Fragment,{children:Object(c.jsx)(j,{})})};o.a.render(Object(c.jsx)(f,{}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.e787fead.chunk.js.map